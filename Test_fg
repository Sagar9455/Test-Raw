html = f"""<html><head><title>UDS Diagnostic Report</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
    body {{ font-family: Arial; margin: 20px; }}
    .pass {{ color: green; font-weight: bold; }}
    .fail {{ color: red; font-weight: bold; }}
    summary {{ font-weight: bold; cursor: pointer; }}
    table {{ border-collapse: collapse; width: 100%; margin-top: 10px; }}
    th, td {{ border: 1px solid #ccc; padding: 8px; }}
    th {{ background: #f0f0f0; }}
    #chart-container {{ width: 300px; margin: 20px auto; }}
</style></head><body>

<!-- CENTERED TITLE -->
<div style="text-align: center;">
    <h1>UDS Diagnostic Report</h1>
</div>

<!-- FLEX ROW -->
<div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 20px;">

    <!-- LEFT COLUMN -->
    <div style="flex: 1;">
        <div><strong>Generated:</strong> {generated_time}</div>
        <div><strong>CAN Log File:</strong> {asc_filename}</div>
        <div><strong>Total Test Cases:</strong> {total}</div>
        <div class="pass">Passed: {passed}</div>
        <div class="fail">Failed: {failed}</div>
        <div><strong>Test Duration:</strong> {duration:.3f} seconds</div>
    </div>

    <!-- RIGHT COLUMN (ECU INFO) -->
    <div style="flex: 0 0 auto; text-align: left; margin-left: 40px;">
        <h3>ECU Information:</h3>
"""

# ECU INFO BLOCK
if ecu_info_data:
    for key, value in ecu_info_data.items():
        html += f"<div>{escape(key)}: {escape(value)}</div>"

# Close FLEX div
html += "</div></div>"
